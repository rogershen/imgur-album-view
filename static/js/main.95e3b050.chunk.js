(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{69:function(e,t,a){e.exports=a(84)},74:function(e,t,a){},75:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),c=a.n(i),o=(a(74),a(10)),l=a(11),u=a(16),s=a(13),m=a(17),h=(a(75),a(39)),d=a(29),g=a(21),p=a(94),f=a(92),b=a(88),v=a(64),y=a(96),E=a(90),w=a(98),k=a(65),j=a(89),B=a(87),O=a(48),A=a(86),S=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=this.props.title,t=this.props.variant?this.props.variant:"secondary",a=this.props.currentEventKey?this.props.currentEventKey:"1",n=this.props.valueSetter,i=this.props.items,c=1,o=[],l=0;l<i.length;l++){var u=i[l];o.push(r.a.createElement(O.a.Item,{onSelect:n,eventKey:String(c),key:String(c),active:a===String(c)},u)),c++}return r.a.createElement(A.a,{title:e,variant:t,id:"".concat(e,"-dropdown")},o)}}]),t}(r.a.Component),C=a(52),F=a(97),z=a(93),L=a(95),N=a(91),D=a(61),I=a(43),W=a(68);function _(e){return r.a.createElement(N.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",animation:!1}),r.a.createElement(N.a.Body,null,r.a.createElement(D.a,{src:e.image.link,className:"img-responsive-ht"})),r.a.createElement(N.a.Footer,null,r.a.createElement(I.a,{onClick:e.onHide},"Close")))}var M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).imgur=new g.Provider({id:"imgur",authorization_url:"https://api.imgur.com/oauth2/authorize"}),a.updateWindowDimensions=function(){a.setState({screenWidth:window.innerWidth})},a.getAccessHeaders=function(){var e=a.imgur.getAccessToken();return{Authorization:"Bearer ".concat(e)}},a.fetchAlbum=function(e){var t="https://api.imgur.com/3/album/".concat(e);return fetch(t,{headers:a.getAccessHeaders()})},a.handleAlbumClick=function(e,t){t.preventDefault(),a.fetchAlbum(e).then((function(e){return e.json()})).then((function(t){a.setState({currAlbum:t.data}),Object(W.a)(document.getElementById(e))}),(function(e){console.log(e)}))},a.generateImageBlocks=function(e){for(var t=a.state.screenWidth>992?3:2,n=0,i=[],c=0;c<e.length;c++){var o=e[c];i[n]?i[n].push(o):i[n]=[o],n=n+1===t?0:n+1}return i.map((function(e){return r.a.createElement(B.a,{xs:12,md:6,lg:4,className:"unpadded-col",key:Math.random().toString(16).slice(-4)},e.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(F.a.Img,{className:"mb-3",src:e.link,onClick:function(){return a.setState(Object(C.a)({},e.id,!0))}}),r.a.createElement("div",null,r.a.createElement(_,{image:e,show:a.state[e.id],onHide:function(){return a.setState(Object(C.a)({},e.id,!1))}})))})))}))},a.state={screenWidth:window.innerWidth,currAlbum:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.albums,a=[],n=this.state.currAlbum;if(n&&t&&!t.map((function(e){return e.id})).includes(n.id))for(var i=document.getElementsByClassName("accordion")[0],c=0;c<i.children.length;c++){i.children[c].getElementsByClassName("collapse")[0].classList.remove("show")}for(var o=function(i){var c=t[i],o=null;n&&c.id===n.id&&(o=n.images),a.push(r.a.createElement(F.a,{key:c.id},r.a.createElement(z.a.Toggle,{id:c.id,onClick:function(t){return e.handleAlbumClick(c.id,t)},as:F.a.Header,eventKey:c.id},r.a.createElement(b.a,null,r.a.createElement(j.a,null,r.a.createElement(B.a,{xs:8},r.a.createElement(j.a,null,r.a.createElement(L.a.Image,{className:"cover-icon",width:32,height:32,src:"https://imgur.com/".concat(c.cover,".jpg"),fluid:!1}),c.title)),r.a.createElement(B.a,{xs:4},r.a.createElement("span",{className:"float-right"},"+"))))),r.a.createElement(z.a.Collapse,{eventKey:c.id},r.a.createElement(F.a.Body,null,r.a.createElement(b.a,null,r.a.createElement(j.a,null,o?e.generateImageBlocks(o,c.id):"Loading...")),r.a.createElement(F.a.Text,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://imgur.com/a/".concat(c.id)},"Click to see this album on Imgur"))))))},l=0;l<t.length;l++)o(l);return r.a.createElement(z.a,null,a)}}]),t}(r.a.Component),T=a(63),H=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"debounce",value:function(e,t,a){var n,r;return function(){function i(){n=null,a||(r=e.apply(c,o))}var c=this,o=arguments;return clearTimeout(n),n=setTimeout(i,t),a&&!n&&(r=e.apply(c,o)),r}}}]),e}(),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).imgur=new g.Provider({id:"imgur",authorization_url:"https://api.imgur.com/oauth2/authorize"}),a.getAccessHeaders=function(){var e=a.imgur.getAccessToken();return{Authorization:"Bearer ".concat(e)}},a.fetchAlbumCount=function(){return fetch("https://api.imgur.com/3/account/me/albums/count",{headers:a.getAccessHeaders()})},a.fetchAlbums=function(e){var t="https://api.imgur.com/3/account/me/albums/".concat(e);return fetch(t,{headers:a.getAccessHeaders()})},a.handleViewBy=function(e){a.props.history.push({search:"?viewBy=".concat(e.target.value,"&sortBy=").concat(a.state.sortBy)}),a.setState({viewBy:e.target.value})},a.handleSortBy=function(e){a.props.history.push({search:"?viewBy=".concat(a.state.viewBy,"&sortBy=").concat(e)}),a.setState({sortBy:e})},a.handleSearchBy=H.debounce((function(e){a.setState({searchBy:e})}),250),a.state={isFetchingData:!1,albumsFetched:0,albums:[],viewBy:"1",sortBy:"1",searchBy:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=T.parse(this.props.location.search);t.viewBy&&this.setState({viewBy:t.viewBy}),t.sortBy&&this.setState({sortBy:t.sortBy}),this.setState({albums:[],albumsFetched:0,isFetchingData:!0}),this.fetchAlbumCount().then((function(e){return e.json()})).then((function(t){for(var a=t.data,n=Math.ceil(a/50),r=0;r<n;r++)e.fetchAlbums(r).then((function(e){return e.json()})).then((function(t){e.setState((function(e,a){return e.albumsFetched+1===n?{albums:e.albums.concat(t.data),albumsFetched:e.albumsFetched+1,isFetchingData:!1}:{albums:e.albums.concat(t.data),albumsFetched:e.albumsFetched+1}}))}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=function(e,t){return e.title.toLowerCase()<t.title.toLowerCase()?-1:1},a=function(e,t){return e.datetime<t.datetime?-1:1},n=this.state.albums,i=r.a.createElement(r.a.Fragment,null);if(!this.state.isFetchingData){switch(this.state.searchBy&&(n=n.filter((function(t){return t.title.toLowerCase().includes(e.state.searchBy.toLowerCase())}))),this.state.sortBy){case"1":n=n.sort(t);break;case"2":n=n.sort(t).reverse();break;case"3":n=n.sort(a).reverse();break;case"4":n=n.sort(a);break;default:i=r.a.createElement(r.a.Fragment,null)}switch(this.state.viewBy){case"1":i=r.a.createElement(M,{albums:n});break;default:i=r.a.createElement(r.a.Fragment,null)}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,r.a.createElement(j.a,null,r.a.createElement(B.a,{xs:6},r.a.createElement(j.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{placeholder:"Search",onChange:function(t){return e.handleSearchBy(t.target.value)}}),r.a.createElement(S,{title:"Sort By",variant:"secondary",valueSetter:function(t,a){e.handleSortBy(t)},currentEventKey:this.state.sortBy,items:["A-Z","Z-A","Newest","Oldest"]})))),r.a.createElement(B.a,{className:"unpadded-col",xs:6},r.a.createElement("span",{className:"float-right"},r.a.createElement(E.a,{onChange:this.handleViewBy},r.a.createElement(w.a,{type:"radio",name:"options",defaultValue:"1"},r.a.createElement(k.a,{variant:"secondary",value:"1"},r.a.createElement("i",{className:"material-icons"},"view_day")),r.a.createElement(k.a,{variant:"secondary",value:"2"},r.a.createElement("i",{className:"material-icons"},"view_module")),r.a.createElement(k.a,{variant:"secondary",value:"3"},r.a.createElement("i",{className:"material-icons"},"dashboard")))))))),r.a.createElement("br",null),i)}}]),t}(r.a.Component),K=Object(d.g)(x),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).imgur=new g.Provider({id:"imgur",authorization_url:"https://api.imgur.com/oauth2/authorize"}),a.props.handleLogin(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.search;if(window.location.hash){var t=window.location.hash+"&"+e.substring(1,e.length);this.imgur.parse(t)}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),t}(r.a.Component),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).imgur=new g.Provider({id:"imgur",authorization_url:"https://api.imgur.com/oauth2/authorize"}),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.match.params.id)}}]),t}(r.a.Component),q=Object(d.g)(V),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).imgur=new g.Provider({id:"imgur",authorization_url:"https://api.imgur.com/oauth2/authorize"}),a.fetchMyAccount=function(){var e=a.imgur.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return fetch("https://api.imgur.com/3/account/me",{headers:t})},a.handleLogin=function(){var e=new g.Request({client_id:"b69efa858e8dc56",redirect_uri:"https://rogershen.github.io/imgur-album-view/callback"}),t=a.imgur.requestToken(e);a.imgur.remember(e),window.location.href=t},a.state={loggedIn:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.imgur.hasAccessToken()?this.fetchMyAccount().then((function(e){return e.json()})).then((function(t){t.data.error?e.handleLogin():e.setState({loggedIn:!0})}),(function(t){e.handleLogin()})):this.handleLogin()}},{key:"render",value:function(){var e=this,t=this.state.loggedIn;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{bg:"dark",variant:"dark"},r.a.createElement(p.a.Brand,null,"Imgur Album View"),r.a.createElement(f.a,null,r.a.createElement(f.a.Link,{href:"/imgur-album-view/albums"},"My Albums"))),r.a.createElement("br",null),r.a.createElement(b.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/imgur-album-view/albums/:id",component:q}),r.a.createElement(d.b,{path:"/imgur-album-view/albums"},t?r.a.createElement(K,null):"Logging in..."),r.a.createElement(d.b,{path:"/callback"},t?r.a.createElement(d.a,{to:"/imgur-album-view/albums"}):r.a.createElement(P,{handleLogin:function(){return e.setState({loggedIn:!0})}}))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[69,1,2]]]);
//# sourceMappingURL=main.95e3b050.chunk.js.map